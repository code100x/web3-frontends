{
  "name": "nft-card",
  "dependencies": [
    "@metaplex-foundation/mpl-token-metadata",
    "@metaplex-foundation/umi-bundle-defaults",
    "@metaplex-foundation/umi-public-keys"
  ],
  "files": [
    {
      "name": "nft-card.tsx",
      "content": "import { useEffect, useState } from \"react\"\nimport {\n  fetchDigitalAsset,\n  mplTokenMetadata,\n} from \"@metaplex-foundation/mpl-token-metadata\"\nimport { createUmi } from \"@metaplex-foundation/umi-bundle-defaults\"\nimport { publicKey } from \"@metaplex-foundation/umi-public-keys\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\n//  variants for the NFT card\nconst nftCardVariants = cva(\n  \"inline-flex flex-col border transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default: \"border-gray-200 bg-white text-black\",\n        dark: \"border-gray-700 bg-gray-900 text-grey-100\",\n      },\n      size: {\n        default: \"w-full\",\n        xs: \"w-24 rounded-lg\",\n        sm: \"w-40 rounded-lg\",\n        lg: \"w-60 rounded-xl\",\n        xl: \"w-80 rounded-xl\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst imgCardVariants = cva(\"rounded-t-lg select-none\", {\n  variants: {\n    imgRatio: {\n      default: \"aspect-auto\",\n      square: \"aspect-square w-full h-full object-cover\",\n      video: \"aspect-video w-full h-full object-cover\",\n    },\n  },\n  defaultVariants: {\n    imgRatio: \"default\",\n  },\n})\n\nconst hideTextVariants = cva(\"truncate block\", {\n  variants: {\n    nftName: {\n      default: \"px-4\",\n      hidden: \"hidden\",\n    },\n    collectionName: {\n      default: \"px-4\",\n      hidden: \"hidden\",\n    },\n  },\n  defaultVariants: {\n    nftName: \"default\",\n    collectionName: \"default\",\n  },\n})\n\ninterface NftCardProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof imgCardVariants>,\n    VariantProps<typeof hideTextVariants>,\n    VariantProps<typeof nftCardVariants> {\n  mintAddress: string\n}\n\nconst NftCard = ({\n  className,\n  variant,\n  size,\n  imgRatio,\n  nftName,\n  collectionName,\n  mintAddress,\n  ...props\n}: NftCardProps) => {\n  const [nftData, setNftData] = useState<any>(null)\n\n  const umi = createUmi(process.env.NEXT_PUBLIC_NFTSCAN_KEY!).use(\n    mplTokenMetadata()\n  )\n\n  useEffect(() => {\n    const fetchNftData = async () => {\n      const nftData = await fetchDigitalAsset(umi, publicKey(mintAddress))\n      const uriData = await fetch(nftData.metadata.uri, {\n        method: \"GET\",\n        headers: {\n          Accept: \"*/*\",\n        },\n      })\n      const jsonUriData = await uriData.json()\n      setNftData({\n        nft: nftData,\n        uriData: jsonUriData,\n      })\n    }\n    fetchNftData()\n  }, [mintAddress])\n\n  console.log(hideTextVariants({ nftName }))\n\n  return (\n    <div\n      className={cn(nftCardVariants({ variant, size }), className)}\n      {...props}\n    >\n      {nftData ? (\n        <>\n          <img\n            src={nftData.uriData.image}\n            alt={nftData.uriData.name}\n            className={cn(imgCardVariants({ imgRatio }), \"\")}\n          />\n          <div className=\"\">\n            <p\n              className={cn(\n                hideTextVariants({ collectionName }),\n                \"text-sm mt-2 mb-1\"\n              )}\n            >\n              {nftData.uriData.properties.collection.name}\n            </p>\n            <h3\n              className={cn(\n                hideTextVariants({ nftName }),\n                \"text-lg font-bold mt-1 mb-2\"\n              )}\n            >\n              {nftData.uriData.name}\n            </h3>\n          </div>\n        </>\n      ) : (\n        <div\n          className={cn(nftCardVariants({ variant, size }), \"animate-pulse\")}\n        >\n          <div\n            className={cn(\n              imgCardVariants({ imgRatio }),\n              \"w-full bg-gray-300 rounded-t-lg\"\n            )}\n          />\n          <div className=\"\">\n            <div\n              className={cn(\n                hideTextVariants({ collectionName }),\n                \"mx-4 h-3 bg-gray-300 rounded mt-2 mb-2\"\n              )}\n            />\n            <div\n              className={cn(\n                hideTextVariants({ nftName }),\n                \"mx-4 w-3/4 h-4 bg-gray-300 rounded mt-2 mb-2\"\n              )}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\nNftCard.displayName = \"NftCard\"\nexport { NftCard, nftCardVariants, imgCardVariants, hideTextVariants }\n"
    }
  ],
  "type": "components:ui"
}
